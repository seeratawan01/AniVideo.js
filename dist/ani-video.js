!function(t,e){var o="AniVideo";"function"==typeof define&&define.amd?define([],e()):"object"==typeof exports?module.exports=e():t[o]=e()}(this,function(t){"use strict";function i(t,e,...o){const i=document.createElement(t);return e&&Object.entries(e).forEach(([t,e])=>{t.startsWith("on")&&"function"==typeof e?i.addEventListener(t.substring(2),e):t.startsWith("data-")||t.startsWith("class")?i.setAttribute(t,e):i[t]=e}),o.forEach(t=>Array.isArray(t)?i.append(...t):void((t="string"==typeof t||"number"==typeof t?document.createTextNode(t):t)instanceof Node&&i.appendChild(t))),i}var s={selector:"#ani-video-wrapper",src:"",startingGif:"",endingGif:"",loop:!1,muted:!0,controls:!1,buttonText:"Play",buttonClass:"ani-video-overlay-btn",title:"",showOverlayAtEnd:"true",showProgress:!1,onplay:()=>{},onended:()=>{},ontimeupdate:()=>{}};function e(t){this.options=function(t){var e,o={};for(e in s)Object.prototype.hasOwnProperty.call(s,e)&&(o[e]=s[e]);for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e]);return o}(t),this.init()}return e.prototype={init:function(){this.selector=document.querySelector(this.options.selector),this.selector.classList.add("ani-video-wrapper"),this.selector.style.backgroundImage="url('"+this.options.startingGif+"')",this.videoElement=function(){console.log("createVideoElement");var t=i("source",{src:this.options.src,type:"video/mp4"}),o=i("video",{class:"ani-video",controls:!1,loop:this.options.loop,onplay:t=>{this.options.onplay(t),t.target.style.opacity="1.0",this.selector.querySelector(".ani-video-overlay").style.opacity="0",this.selector.querySelector(".ani-video-overlay").style.zIndex="0"},onended:t=>{this.options.onended(t),t.target.style.opacity="0",this.options.showOverlayAtEnd&&(this.selector.querySelector(".ani-video-overlay").style.opacity="1.0"),this.options.showProgress&&(this.selector.querySelector(".ani-video-track > div").style.width=0),this.selector.querySelector(".ani-video-overlay").style.zIndex="2",this.selector.style.backgroundImage="url('"+this.options.endingGif+"')"}},t,"Your browser does not support the video tag.");return o.addEventListener("timeupdate",t=>{var e=o.currentTime,e=Math.floor(e/o.duration*100);this.options.ontimeupdate(t,e),this.options.showProgress&&(this.selector.querySelector(".ani-video-track > div").style.width=e+"%")}),o.muted=this.options.muted,o.loop=this.options.loop,o.controls=this.options.controls,this.selector.appendChild(o),o}.bind(this)(),function(){console.log("createOverlay");var t=i("h1",{},this.options.title),e=i("button",{class:this.options.buttonClass,onclick:()=>{this.videoElement.play()}},this.options.buttonText),e=i("div",{class:"ani-video-overlay"},t,e);this.selector.appendChild(e)}.bind(this)(),this.options.showProgress&&function(){console.log("createProgressTrack");var t=i("div",{class:"ani-video-track"},i("div"));this.selector.appendChild(t)}.bind(this)()},destroy:function(){},play:function(){this.selector.getElementsByTagName("video")[0].play()}},e});